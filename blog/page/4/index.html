
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>SotoSeattle</title>
  <meta name="author" content="Javier Soto">

  
  <meta name="description" content="In order to hone in my coding skills and get up to par with professional best practices I am joining the Rails Dev Accelerator Course imparted by &hellip;">
  

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://sotoseattle.github.io/blog/page/4">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <link href="" rel="alternate" title="SotoSeattle" type="application/atom+xml">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
  <script>!window.jQuery && document.write(unescape('%3Cscript src="./javascripts/lib/jquery.min.js"%3E%3C/script%3E'))</script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href='http://fonts.googleapis.com/css?family=Open+Sans' rel='stylesheet' type='text/css'>
<link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
<!-- MathJax -->
<script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    tex2jax: {
      inlineMath: [ ['$','$'], ["$$","$$"] ],
      processEscapes: true
    }
  });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Config({
      tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
    });
</script>

<script type="text/x-mathjax-config">
    MathJax.Hub.Queue(function() {
        var all = MathJax.Hub.getAllJax(), i;
        for(i=0; i < all.length; i += 1) {
            all[i].SourceElement().parentNode.className += ' has-jax';
        }
    });
</script>

<script type="text/javascript"
   src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML">
</script>

  

</head>

<body   class="collapse-sidebar sidebar-footer" >
  <header role="banner">
	<div class="header-title"><a href="/">SotoSeattle</a></div>


	<br><div class="header-subtitle">Developer of software, ideas, startups</div>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
<!--   <li><a href="" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li> -->
  
  <li class='icon'>
    <a href="https://github.com/sotoseattle/">
      <img src="/images/logos/github_icon.png" width="36" height="27">
      </img>
    </a>
  </li>
  <li class='icon'>
    <a href="https://www.linkedin.com/in/sotoseattle/">
      <img src="/images/logos/linkedin-256.png"  width="27" height="27">
      </img>
    </a>
  </li>
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:sotoseattle.github.io" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
<!--   <li><a href="projects/">Projects</a></li> -->
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/images/Javier_Soto_resume.pdf">Resume</a></li>
  <li><a href="/about">About</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div class="blog-index">
  
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2014/09/15/Back-to-School/">Back to School</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2014-09-15T08:01:00-07:00" pubdate data-updated="true">Sep 15<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><p>In order to hone in my coding skills and get up to par with professional best practices I am joining the <em>Rails Dev Accelerator Course</em> imparted by <a href="http://www.codefellows.com">Code Fellows</a>.</p>

<p>Code Fellows is a start up inserted in the middle of the Amazon campus in South Lake Union. It is a dynamic environment full of energetic and passionate coders (students, staff and teachers).</p>

<p>It promises to be 8 frantic weeks of theory and practice based on all kinds of coding assignments. I’ll try to keep up blogging in the interim but please forgive me if the workload keeps me away from these posts.</p>

<p><a href="http://www.codefellows.com"><img class="center" src="/images/logos/codefellows.png" width="200" title="Code Fellows logo" /></a></p>

</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2014/07/17/Primo-Factors/">PRIMO: Factors</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2014-07-17T08:01:00-07:00" pubdate data-updated="true">Jul 17<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="factor">Factor</h2>

<p>The best way to visualize a Factor is in terms of an n-dimensional matrix. Each dimension (or axis) corresponds to a random variable. These variables are held in the <code>@vars</code> instance variable.</p>

<p>Each axis has as many possible values as its cardinality. A Factor made of two binary variables (x, y) will be similar to a 2x2 matrix.</p>

<p>For example, given two random variables that represent the toss of a coin, both being binary (head or tails) would give us the following factor:</p>

<table class="widetable">
  <thead>
    <tr>
      <th> </th>
      <th>head</th>
      <th>tails</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>head</td>
      <td>p(h &amp; h)</td>
      <td>p(h &amp; t)</td>
    </tr>
    <tr>
      <td>tails</td>
      <td>p(t &amp; h)</td>
      <td>p(t &amp; t)</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>In tabular form we have:</p>

<table class="widetable">
  <thead>
    <tr>
      <th>outcome</th>
      <th>probability</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <td>head &amp; head</td>
      <td>p(h &amp; h)</td>
    </tr>
    <tr>
      <td>head &amp; tail</td>
      <td>p(h &amp; t)</td>
    </tr>
    <tr>
      <td>tail &amp; head</td>
      <td>p(t &amp; h)</td>
    </tr>
    <tr>
      <td>tail &amp; tail</td>
      <td>p(t &amp; t)</td>
    </tr>
  </tbody>
</table>

<p><br /></p>

<p>So apart from the variables it holds, the Factor also keeps track of the values of all possible outcomes, the <code>@vals</code>. These will be the probabilities of the outcomes in most cases.</p>

<p>Now, the vars are kept in an array, and the vals are stored in an N-array, a multidimensional array, where each dimension correspond to a random variable.</p>

<h2 id="operations">Operations</h2>

<h3 id="multiplication-and-addition">Multiplication and Addition</h3>

<p>Let’s begin by saying that like the previous operations these methods:</p>

<ul>
  <li>modify the first element ( a * b =&gt; a is changed)</li>
  <li>allow multiplying/adding by number (elementwise) or factor</li>
  <li>override the common operators (* == multiply factors, + == add factors)</li>
  <li>returns itself so we can chain operations (f1 * f2 * f3)</li>
</ul>

<p>The key methods. Given two factors I modify each one by:</p>

<ul>
  <li>gathering all the variables of the resulting multiplication factor (union of all sorted variables)</li>
  <li>inserting new axis in each factor for each new variable that it doesn’t have. This way both factors will have the same axes, in the same order (by the way, this is the reason why we needed a way to sort random variables by id). This is accomplished with simple rotations of the NArray.</li>
  <li>expanding the values ndarray on each new axis by simply repeating existing values a number of times equal to the cardinality of the axi’s variable.</li>
</ul>

<p>Continuing with the graphic example, to expand our previous factor (variables v1 and v2) by another variable (v3) we would start with the 2D values along axes v1, v2. Then we add a third dimension for v3.</p>

<p><img class="center" src="/images/nov13/multiply1.png" /></p>

<p>And then we repeat the 2D matrix (v1,v2) along the v3 axis. In our case v1 and v2 have cardinality 2 and v3 has cardinality 3 so we repeat the 2D matrix twice more along the v3 axis.</p>

<p><img class="center" src="/images/nov13/multiply2.png" /></p>

<p>At the end of the process we have two NArrays that represent the same variables, aligned and of the same shape. To multiply/add we only need to multiply/add them element wise. At the end of the day, this Ruby method is 30% smaller and yet faster than the python version.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span>Factor Multiplication &amp; Addition</span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
<span class="line-number">23</span>
<span class="line-number">24</span>
<span class="line-number">25</span>
<span class="line-number">26</span>
<span class="line-number">27</span>
<span class="line-number">28</span>
<span class="line-number">29</span>
<span class="line-number">30</span>
<span class="line-number">31</span>
<span class="line-number">32</span>
<span class="line-number">33</span>
<span class="line-number">34</span>
<span class="line-number">35</span>
<span class="line-number">36</span>
<span class="line-number">37</span>
<span class="line-number">38</span>
<span class="line-number">39</span>
<span class="line-number">40</span>
<span class="line-number">41</span>
<span class="line-number">42</span>
<span class="line-number">43</span>
<span class="line-number">44</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line"><span class="k">def</span> <span class="nf">*</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span class="line">  <span class="n">other</span><span class="o">.</span><span class="n">is_a?</span> <span class="no">Numeric</span> <span class="p">?</span> <span class="nb">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span> <span class="o">*</span> <span class="n">other</span> <span class="p">:</span> <span class="n">modify_by</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">&amp;</span><span class="ss">:*</span><span class="p">)</span>
</span><span class="line">  <span class="nb">self</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">+</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span class="line">  <span class="n">other</span><span class="o">.</span><span class="n">is_a?</span> <span class="no">Numeric</span> <span class="p">?</span> <span class="nb">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">vals</span> <span class="o">+</span> <span class="n">other</span> <span class="p">:</span> <span class="n">modify_by</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">&amp;</span><span class="ss">:+</span><span class="p">)</span>
</span><span class="line">  <span class="nb">self</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">modify_by</span><span class="p">(</span><span class="n">other</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">_block</span><span class="p">)</span>
</span><span class="line">  <span class="k">return</span> <span class="nb">self</span> <span class="k">unless</span> <span class="n">other</span>
</span><span class="line">  <span class="n">all_vars</span> <span class="o">=</span> <span class="o">[*</span><span class="n">vars</span><span class="p">,</span> <span class="o">*</span><span class="n">other</span><span class="o">.</span><span class="n">vars</span><span class="o">].</span><span class="n">uniq</span><span class="o">.</span><span class="n">sort</span>
</span><span class="line">
</span><span class="line">  <span class="n">narr1</span> <span class="o">=</span> <span class="n">grow_axes</span><span class="p">(</span><span class="n">all_vars</span><span class="p">)</span>
</span><span class="line">  <span class="n">narr2</span> <span class="o">=</span> <span class="n">other</span><span class="o">.</span><span class="n">grow_axes</span><span class="p">(</span><span class="n">all_vars</span><span class="p">)</span>
</span><span class="line">  <span class="n">na</span> <span class="o">=</span> <span class="k">yield</span> <span class="n">narr1</span><span class="p">,</span> <span class="n">narr2</span>
</span><span class="line">
</span><span class="line">  <span class="nb">self</span><span class="o">.</span><span class="n">vars</span> <span class="o">=</span> <span class="n">all_vars</span>
</span><span class="line">  <span class="nb">self</span><span class="o">.</span><span class="n">vals</span> <span class="o">=</span> <span class="n">na</span><span class="o">.</span><span class="n">reshape!</span><span class="p">(</span><span class="o">*</span><span class="n">cardinalities</span><span class="p">)</span>
</span><span class="line">  <span class="nb">self</span>
</span><span class="line"><span class="k">end</span>
</span><span class="line">
</span><span class="line"><span class="k">def</span> <span class="nf">grow_axes</span><span class="p">(</span><span class="n">whole_vars</span><span class="p">)</span>
</span><span class="line">  <span class="k">return</span> <span class="n">vals</span><span class="o">.</span><span class="n">flatten</span> <span class="k">if</span> <span class="n">vars</span> <span class="o">==</span> <span class="n">whole_vars</span>
</span><span class="line">
</span><span class="line">  <span class="n">multiplier</span> <span class="o">=</span> <span class="mi">1</span><span class="o">.</span><span class="mi">0</span>
</span><span class="line">  <span class="n">new_vars</span> <span class="o">=</span> <span class="n">whole_vars</span><span class="o">.</span><span class="n">reject</span> <span class="p">{</span> <span class="o">|</span><span class="n">rv</span><span class="o">|</span> <span class="n">vars</span><span class="o">.</span><span class="n">include?</span><span class="p">(</span><span class="n">rv</span><span class="p">)</span> <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="n">old_order_vars</span> <span class="o">=</span> <span class="o">[*</span><span class="n">vars</span><span class="p">,</span> <span class="o">*</span><span class="n">new_vars</span><span class="o">]</span>
</span><span class="line">  <span class="n">new_order</span> <span class="o">=</span> <span class="n">whole_vars</span><span class="o">.</span><span class="n">map</span> <span class="p">{</span> <span class="o">|</span><span class="n">e</span><span class="o">|</span> <span class="n">old_order_vars</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">e</span><span class="p">)</span> <span class="p">}</span>
</span><span class="line">
</span><span class="line">  <span class="n">new_cards</span> <span class="o">=</span> <span class="n">cardinalities</span><span class="p">(</span><span class="n">new_vars</span><span class="p">)</span>
</span><span class="line">  <span class="n">multiplier</span> <span class="o">=</span> <span class="n">new_cards</span><span class="o">.</span><span class="n">reduce</span><span class="p">(</span><span class="n">multiplier</span><span class="p">,</span> <span class="ss">:*</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">  <span class="n">flat</span> <span class="o">=</span> <span class="o">[</span><span class="n">vals</span><span class="o">.</span><span class="n">flatten</span><span class="o">]</span> <span class="o">*</span> <span class="n">multiplier</span>
</span><span class="line">  <span class="n">na</span> <span class="o">=</span> <span class="no">NArray</span><span class="o">.</span><span class="n">to_na</span><span class="p">(</span><span class="n">flat</span><span class="p">)</span><span class="o">.</span><span class="n">reshape!</span><span class="p">(</span><span class="o">*</span><span class="n">vals</span><span class="o">.</span><span class="n">shape</span><span class="p">,</span> <span class="o">*</span><span class="n">new_cards</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">  <span class="k">if</span> <span class="n">new_order</span> <span class="o">!=</span> <span class="o">[*</span><span class="p">(</span><span class="mi">0</span><span class="o">.</span><span class="n">.whole_vars</span><span class="o">.</span><span class="n">size</span><span class="p">)</span><span class="o">]</span>
</span><span class="line">    <span class="n">na</span> <span class="o">=</span> <span class="n">na</span><span class="o">.</span><span class="n">transpose</span><span class="p">(</span><span class="o">*</span><span class="n">new_order</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="n">na</span><span class="o">.</span><span class="n">flatten</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>

<h3 id="marginalization">Marginalization</h3>

<p>We want to eliminate a dimension, (a variable or axis), by adding all values along the eliminated axis. We alias the method to the modulus operator <code>%</code> for syntactical convenience.</p>

<p>It allows for chaining operations i.e. f1 % v1 % v2 eliminates in order, first v1 from f1, and then v2 from the resulting factor. Each time % kicks in, f1 is modified in place.</p>

<p>If for example, the factor f1, has only those two random variables (v1, v2), reducing on v2 means selecting the axis for v2 and for each row of v1, adding up all columns of v2.</p>

<p><img class="center" src="/images/nov13/margin.png" /></p>

<p>The method marginalize_but is a fast implementation of marginalizing in bulk for all variables in the factor except for one that we want to extract. In this operation we end up with the final probabilities of all assignments for that selected random variable.</p>

<h3 id="reduction">Reduction</h3>

<p>Set values to 0.0 based on observed variables. For example, given a random variable of color that can only take two possible values (red, blue).i If we know that the color is red, then p(blue)=0.0.</p>

<p>We modify the NArray values by 1) selecting the observed variable axis and leaving all other axis untouched, and 2) for the selected axis, setting to 0. all cells that are not in the observation column.</p>
</div>
  
  


    </article>
  
  
    <article>
      
  <header>
  
    
      <h1 class="entry-title"><a href="/blog/2014/07/16/Primo-Random-Var/">PRIMO: Random Variables</a></h1>
      
      
    
      <p class="meta">
        








  


<time datetime="2014-07-16T08:01:00-07:00" pubdate data-updated="true">Jul 16<span>th</span>, 2014</time>
        
      </p>
    
  </header>


  <div class="entry-content"><h2 id="als-primo">Alás Primo!</h2>

<p>I have decided to code all this in Ruby instead of Python. The reason being that Ruby is more flexible in order to build prototypes that encompass all aspects of the functionality. The apps that I would like to build around ML are like cars. The engine may be a key component and its performance paramount, but there is more to a car than its engine. Our apps will be more than its inference engine, and in all those other aspects Ruby shines. If I was obsessed only with the engine I would have code it all in Julia or C, but I am in this for the fun and the possibilities, and Ruby is a pleasure to play with.</p>

<p>Besides, what I have already coded in Ruby is already faster than my Python code (which shows what a beginner I am in Python). The key to the performance boost has been the use of the <a href="http://masa16.github.io/narray/">NArray gem from Masahiro Tanaka</a>, which allows me to, for example, multiply two multidimensional arrays element wise in a single step, after aligning them with simple rotations of their axes (actually pretty cool).</p>

<p>I have christened this working library as PRIMO (Probabilistic Inference Modeling), and the code is available at https://github.com/sotoseattle/PRIMO</p>

<p>It works along the same lines as the Python version so the following posts will be a bit repetitive since we are rehearsing much of what was done months ago in Python. This is an ongoing effort that I hope to culminate with a working CRF application that estimates its own parameters.</p>

<h2 id="random-variables">Random Variables</h2>

<p>The essential building block of Primo, similar to Nodes in graphs, each holds the following instance variables:</p>

<ul>
  <li><strong>cardinality</strong>. For example, a binary variable that can only take two values (true-false, 0-1) and therefore it has a cardinality of 2. The roll of a dice would have cardinality of 6, because the the outcome can take 6 different values: 1, 2, 3, 4, 5 or 6.</li>
  <li><strong>ass</strong> (assignments). An ordered array with all the possible assignments. If no assignments are given it uses integers starting from 0. The previous dice roll would have an ass of [0, 1, 2, 3, 4, 5]; a binary variable would have an ass of [0, 1]. We can also make a binary random variable for the health of a patient with the assignment array [‘healthy’, ‘sick’].</li>
  <li><strong>name</strong>. Just a name to make it easier to identify the variable.</li>
</ul>

<p>An important detail is how we define the &lt;=&gt; operator because we will be comparing between random variables based on their internal object ids. This is necessary because later on, when we multiply sets of variables, we will do it according to their order. The order itself doesn’t matter, all we’ll need is that there is a way to order them in a stable, immutable and persistent way.</p>

<div class="bogus-wrapper"><notextile><figure class="code"><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class="line-number">1</span>
<span class="line-number">2</span>
<span class="line-number">3</span>
<span class="line-number">4</span>
<span class="line-number">5</span>
<span class="line-number">6</span>
<span class="line-number">7</span>
<span class="line-number">8</span>
<span class="line-number">9</span>
<span class="line-number">10</span>
<span class="line-number">11</span>
<span class="line-number">12</span>
<span class="line-number">13</span>
<span class="line-number">14</span>
<span class="line-number">15</span>
<span class="line-number">16</span>
<span class="line-number">17</span>
<span class="line-number">18</span>
<span class="line-number">19</span>
<span class="line-number">20</span>
<span class="line-number">21</span>
<span class="line-number">22</span>
</pre></td><td class="code"><pre><code class="ruby"><span class="line">  <span class="k">def</span> <span class="nf">initialize</span><span class="p">(</span><span class="n">args</span><span class="p">)</span>
</span><span class="line">    <span class="n">args</span><span class="o">.</span><span class="n">merge</span><span class="p">(</span><span class="nb">name</span><span class="p">:</span> <span class="s1">&#39;&#39;</span><span class="p">,</span> <span class="ss">ass</span><span class="p">:</span> <span class="kp">nil</span><span class="p">)</span>
</span><span class="line">
</span><span class="line">    <span class="vi">@card</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="ss">:card</span><span class="o">].</span><span class="n">to_i</span>
</span><span class="line">    <span class="vi">@name</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="ss">:name</span><span class="o">].</span><span class="n">to_s</span>
</span><span class="line">    <span class="vi">@ass</span> <span class="o">=</span> <span class="n">args</span><span class="o">[</span><span class="ss">:ass</span><span class="o">]</span> <span class="p">?</span> <span class="nb">Array</span><span class="p">(</span><span class="n">args</span><span class="o">[</span><span class="ss">:ass</span><span class="o">]</span><span class="p">)</span> <span class="p">:</span> <span class="o">[*</span><span class="mi">0</span><span class="o">.</span><span class="n">.</span><span class="o">.</span><span class="vi">@card</span><span class="o">]</span>
</span><span class="line">
</span><span class="line">    <span class="nb">fail</span> <span class="no">ArgumentError</span> <span class="k">if</span> <span class="vi">@card</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="vi">@ass</span><span class="o">.</span><span class="n">size</span> <span class="o">!=</span> <span class="vi">@card</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">&lt;=&gt;</span><span class="p">(</span><span class="n">other</span><span class="p">)</span>
</span><span class="line">    <span class="nb">object_id</span> <span class="o">&lt;=&gt;</span> <span class="n">other</span><span class="o">.</span><span class="n">object_id</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">[]</span><span class="p">(</span><span class="n">assignment</span><span class="p">)</span>
</span><span class="line">    <span class="n">ass</span><span class="o">.</span><span class="n">index</span><span class="p">(</span><span class="n">assignment</span><span class="p">)</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line">
</span><span class="line">  <span class="k">def</span> <span class="nf">to_s</span>
</span><span class="line">    <span class="s2">&quot;</span><span class="si">#{</span><span class="nb">name</span><span class="si">}</span><span class="s2">&quot;</span>
</span><span class="line">  <span class="k">end</span>
</span><span class="line"><span class="k">end</span>
</span></code></pre></td></tr></table></div></figure></notextile></div>
</div>
  
  


    </article>
  
  <div class="pagination">
    
      <a class="prev" href="/blog/page/5/">&larr; Older</a>
    
    <a href="/blog/archives">Blog Archives</a>
    
    <a class="next" href="/blog/page/3/">Newer &rarr;</a>
    
  </div>
</div>
<aside class="sidebar">
  
    <section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2014/10/30/Devise-Angular-Rails/">Wiring Devise into Angular + Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/28/Rails-API-Versioning/">Rails Api Versioning</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/27/Wire-Angular-Rails/">Wiring Angular into Rails</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/24/Ruby-Meta-Frolicking/">Ruby Meta-Frolicking</a>
      </li>
    
      <li class="post">
        <a href="/blog/2014/10/20/JS-review/">JavaScript OO Review</a>
      </li>
    
  </ul>
</section>





  
</aside>

    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2014 -  Javier Soto <br/>
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a> + <a href="https://github.com/ioveracker/mnml">mnml</a>.
	  
  </span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'sotoseattle';
      
        
        var disqus_script = 'count.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
<!-- mathjax config similar to math.stackexchange -->
<script type="text/x-mathjax-config">
MathJax.Hub.Config({
  jax: ["input/TeX", "output/HTML-CSS"],
  tex2jax: {
    inlineMath: [ ['$', '$'] ],
    displayMath: [ ['$$', '$$']],
    processEscapes: true,
    skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
  },
  messageStyle: "none",
  "HTML-CSS": { preferredFont: "TeX", availableFonts: ["STIX","TeX"] }
});
</script>
<script src="http://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS_HTML" type="text/javascript"></script>
