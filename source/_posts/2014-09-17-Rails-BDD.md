---
layout: post
title: "Rails BDD cheats"
date: 2014-09-17 18:01
comments: true
categories: Rails, BDD
---

As a reminder, when testing BDD style a Rails app these are helpful to have close by:


```ruby
# Rakefile
require File.expand_path('../config/application', __FILE__)

Rails.application.load_tasks

Rails::TestTask.new('test:features' => 'test:prepare') do |t|
  t.pattern = 'test/features/**/*_test.rb'
end

Rake::Task['test:run'].enhance ['test:features']

task default: 'test'
```

```ruby
# test_helper.rb
# ENV['RAILS_ENV'] ||= 'test'
Rails.env = 'test'
puts "Current environment: #{Rails.env}"

require File.expand_path('../../config/environment', __FILE__)
require 'rails/test_help'
require 'minitest/rails/capybara'
require 'capybara/poltergeist'
# require 'pry-rescue/minitest'

class ActiveSupport::TestCase
  fixtures :all
  Capybara.javascript_driver = :poltergeist
end
```

```ruby
# test/features/do_some_test.rb
require 'test_helper'

feature 'Do something' do
  scenario 'anybody can do something' do
    ...
  end
end
```
